<!DOCTYPE html>
<html>

  <head>

    <meta charset="utf-8">
    <title>revisor auth</title>

    <script src="libs/firebase/firebase.js"></script>

    <style>

      body {
        font-family: sans-serif;
      }

      button {
        padding: 10px;
        background-color: #6199df;
        border: none;
        border-radius: 3px;
        color: #fff;
      }

    </style>

  </head>
  <body>

    <h3>Select a provider to log in</h3>
    <div id="auth">
      <button id="google">Sign in with Google</button>
      <button id="twitter">Sign in with Twitter</button>
      <button id="github">Sign in with Github</button>
    </div>

    <script>

      var providers = ['google', 'twitter', 'github'];
      var ref       = new Firebase("https://revisor.firebaseio.com");

      providers.forEach(function (provider) {
        var button = document.getElementById(provider);

        button.addEventListener("click", function () {
          callRef(provider);
        });
      });

      function callRef(provider) {
        ref.authWithOAuthPopup(provider, function(error, authData) {
          chrome.runtime.sendMessage('jgpiophfohhpehfhebkaeaedgegmokma', { authData: authData });
          window.close();
        });
      }

    </script>

  </body>
</html>
